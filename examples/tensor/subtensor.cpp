#include <boost/numeric/ublas/tensor.hpp>
#include <iostream>

namespace ub = boost::numeric::ublas;
namespace sp = ub::span;

int main(){

    auto t1 = ub::tensor{ ub::static_extents<10,10>{}, 1.f };
    auto t2 = ub::tensor{ ub::dynamic_extents<>{10,10}, 1.f};

    for(auto i = 0; i < 10; i ++){
        for(auto j = 0; j < 10; j ++){
            t1.at(i,j) = i * 10 + j;
            t2.at(i,j) = i * 10 + j;
        }
    }

    //t1 and t2 after init
    //  0  1  2  3  4  5  6  7  8  9 
    // 10 11 12 13 14 15 16 17 18 19 
    // 20 21 22 23 24 25 26 27 28 29 
    // 30 31 32 33 34 35 36 37 38 39 
    // 40 41 42 43 44 45 46 47 48 49 
    // 50 51 52 53 54 55 56 57 58 59 
    // 60 61 62 63 64 65 66 67 68 69 
    // 70 71 72 73 74 75 76 77 78 79 
    // 80 81 82 83 84 85 86 87 88 89 
    // 90 91 92 93 94 95 96 97 98 99

    // statically sliced subtensor and can only be used with static tensor
    auto s1 = ub::subtensor<decltype(t1),sp::slice<2,6>,sp::slice<>>(t1);
    // data: 
    // 20 21 22 23 24 25 26 27 28 29 
    // 30 31 32 33 34 35 36 37 38 39 
    // 40 41 42 43 44 45 46 47 48 49 
    // 50 51 52 53 54 55 56 57 58 59 
    // 60 61 62 63 64 65 66 67 68 69 

    auto s2 = ub::subtensor<decltype(t1),sp::slice<2>,sp::slice<2,6,3>>(t1);
    // data: 
    // 22 25 

    auto s3 = ub::subtensor<decltype(t1),sp::slice<>,sp::slice<>>(t1);
    // data: 
    //  0  1  2  3  4  5  6  7  8  9 
    // 10 11 12 13 14 15 16 17 18 19 
    // 20 21 22 23 24 25 26 27 28 29 
    // 30 31 32 33 34 35 36 37 38 39 
    // 40 41 42 43 44 45 46 47 48 49 
    // 50 51 52 53 54 55 56 57 58 59 
    // 60 61 62 63 64 65 66 67 68 69 
    // 70 71 72 73 74 75 76 77 78 79 
    // 80 81 82 83 84 85 86 87 88 89 
    // 90 91 92 93 94 95 96 97 98 99

    //-----------------------------------------------------------------//

    // dynamically sliced subtensor
    auto d1 = ub::subtensor { t2 };
    // data: 
    //  0  1  2  3  4  5  6  7  8  9 
    // 10 11 12 13 14 15 16 17 18 19 
    // 20 21 22 23 24 25 26 27 28 29 
    // 30 31 32 33 34 35 36 37 38 39 
    // 40 41 42 43 44 45 46 47 48 49 
    // 50 51 52 53 54 55 56 57 58 59 
    // 60 61 62 63 64 65 66 67 68 69 
    // 70 71 72 73 74 75 76 77 78 79 
    // 80 81 82 83 84 85 86 87 88 89 
    // 90 91 92 93 94 95 96 97 98 99

    auto d2 = ub::subtensor { t2, sp::slice<>{2,6}, sp::slice<>{} };
    // data: 
    // 20 21 22 23 24 25 26 27 28 29 
    // 30 31 32 33 34 35 36 37 38 39 
    // 40 41 42 43 44 45 46 47 48 49 
    // 50 51 52 53 54 55 56 57 58 59 
    // 60 61 62 63 64 65 66 67 68 69 

    auto d3 = ub::subtensor { t2, sp::slice<>{2}, sp::slice<>{2,6,3} };
    // data: 
    // 22 25

    return 0;
}